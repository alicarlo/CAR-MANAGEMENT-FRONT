<mat-dialog-content>
  <div class="p-[20px]">
    <!-- New Action-->
    <div  class="flex flex-col gap-4">
      <p class="text-foreground font-semibold">Cliente</p>

      <div>
        <form  [formGroup]="saveForm" class="flex flex-col gap-6">
          <div class="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
          
            <div class="flex flex-col gap-2">
              <p class="text-foreground text-[11px] font-medium">Correo:</p>
              <input
                class="py-2 pl-8 pr-2"
                placeholder="Correo"
                type="email"
                formControlName="email" 
              />
              <div class="error-messages">
                <ng-container *ngFor="let error of error_messages.email">
                  <div class="error-message" *ngIf="saveForm.get('email').hasError(error.type) && (saveForm.get('email').dirty || saveForm.get('email').touched)">
                    {{error.message}}
                  </div>
                </ng-container>
              </div>
            </div>

        
            <div class="flex flex-col gap-2">
              <p class="text-foreground text-[11px] font-medium">Nombre y Apellidos:</p>
              <input
                class="py-2 pl-8 pr-2"
                placeholder="Nombre y Apellidos"
                type="text"
                formControlName="full_name" 
              />
              <div class="error-messages">
                <ng-container *ngFor="let error of error_messages.full_name">
                  <div class="error-message" *ngIf="saveForm.get('full_name').hasError(error.type) && (saveForm.get('full_name').dirty || saveForm.get('full_name').touched)">
                    {{error.message}}
                  </div>
                </ng-container>
              </div>
            </div>

            <div class="flex flex-col gap-2">
              <p class="text-foreground text-[11px] font-medium">Telefono:</p>
              <input
                class="py-2 pl-8 pr-2"
                placeholder="Telefono"
                type="text"
                formControlName="phone" 
              />
              <div class="error-messages">
                <ng-container *ngFor="let error of error_messages.phone">
                  <div class="error-message" *ngIf="saveForm.get('phone').hasError(error.type) && (saveForm.get('phone').dirty || saveForm.get('phone').touched)">
                    {{error.message}}
                  </div>
                </ng-container>
              </div>
            </div>

            <div class="flex flex-col gap-2">
              <p class="text-foreground text-[11px] font-medium">Telefono #2:</p>
              <input
                class="py-2 pl-8 pr-2"
                placeholder="Telefono #2"
                type="text"
                formControlName="phone_mobile" 
              />
            </div>

            <div class="flex flex-col gap-2">
              <p class="text-foreground text-[11px] font-medium">Telefono #3:</p>
              <input
                class="py-2 pl-8 pr-2"
                placeholder="Telefono #3"
                type="text"
                formControlName="phone_work" 
              />
            </div>

            <div class="flex flex-col gap-2">
              <p class="text-foreground text-[11px] font-medium">Direccion:</p>
              <input
                class="py-2 pl-8 pr-2"
                placeholder="Direccion"
                type="text"
                formControlName="address_street_1" 
              />
              <div class="error-messages">
                <ng-container *ngFor="let error of error_messages.address_street_1">
                  <div class="error-message" *ngIf="saveForm.get('address_street_1').hasError(error.type) && (saveForm.get('address_street_1').dirty || saveForm.get('address_street_1').touched)">
                    {{error.message}}
                  </div>
                </ng-container>
              </div>
            </div>

            <div class="flex flex-col gap-2">
              <p class="text-foreground text-[11px] font-medium">Direccion #2 (Opcional):</p>
              <input
                class="py-2 pl-8 pr-2"
                placeholder="Direccion #2"
                type="text"
                formControlName="address_street_2" 
              />
            </div>

            <div class="flex flex-col gap-2">
              <p class="text-foreground text-[11px] font-medium">Estado (Opcional):</p>
              <input
                class="py-2 pl-8 pr-2"
                placeholder="Estado"
                type="text"
                formControlName="address_state" 
              />
            </div>

            <div class="flex flex-col gap-2">
              <p class="text-foreground text-[11px] font-medium">Ciudad (Opcional):</p>
              <input
                class="py-2 pl-8 pr-2"
                placeholder="Ciudad"
                type="text"
                formControlName="address_city" 
              />
            </div>

            <div class="flex flex-col gap-2">
              <p class="text-foreground text-[11px] font-medium">Codigo postal (Opcional):</p>
              <input
                class="py-2 pl-8 pr-2"
                placeholder="Codigo postal"
                type="text"
                formControlName="address_zip" 
              />
            </div>

            <div class="flex flex-col gap-2">
              <p class="text-foreground text-[11px] font-medium">Pais (Opcional):</p>
              <input
                class="py-2 pl-8 pr-2"
                placeholder="Pais"
                type="text"
                formControlName="address_country" 
              />
            </div>

            <div class="flex flex-col gap-2">
              <p class="text-foreground text-[11px] font-medium">Cumpleanos:</p>
              <div class="relative">
                 <input
                    #dob
                    type="date"
                    class="py-2 pl-8 pr-2"
                    formControlName="birthday"
                    [attr.max]="todayStr"       
                  />

                <button 
                  type="button"
                  class="absolute right-2 top-1/2 -translate-y-1/2 text-foreground flex items-center justify-center"
                  (click)="openPicker(dob)"
                  >
                  <mat-icon style="font-size: 20px;">calendar_month</mat-icon>
                </button>
              </div>
              <div class="error-messages">
                <ng-container *ngFor="let error of error_messages.birthday">
                  <div class="error-message" *ngIf="saveForm.get('birthday').hasError(error.type) && (saveForm.get('birthday').dirty || saveForm.get('birthday').touched)">
                    {{error.message}}
                  </div>
                </ng-container>
              </div>
            </div>

            <div class="flex flex-col gap-2">
              <label for="sexo" class="text-foreground text-[11px] font-medium">Genero:</label>
              <div class="relative">
                <select 
                  id="sexo"
                  formControlName="gender"
                  class="w-full py-2 pl-8 pr-10 rounded-md
                        bg-background text-foreground
                        border border-border
                        focus:outline-none focus:ring-2 focus:ring-primary/50
                        appearance-none [color-scheme:dark]"
                >
                  <option value="" disabled selected hidden>Seleccionaâ€¦</option>

                  <option *ngFor="let s of sexOptions" [value]="s">
                    <span *ngIf="s === 'male'">Masculino</span>
                    <span *ngIf="s === 'female'">Femenino</span>
                  </option>
                </select>
              </div>

               <div class="error-messages">
                <ng-container *ngFor="let error of error_messages.gender">
                  <div class="error-message" *ngIf="saveForm.get('gender').hasError(error.type) && (saveForm.get('gender').dirty || saveForm.get('gender').touched)">
                    {{error.message}}
                  </div>
                </ng-container>
              </div>
            </div>

            <div class="flex flex-col gap-2">
              <p class="text-foreground text-[11px] font-medium">RFC (Opcional):</p>
              <input
                class="py-2 pl-8 pr-2"
                placeholder="RFC"
                type="text"
                formControlName="rfc" 
              />
            </div>
          </div>

        </form>
      </div>
    </div>
  </div>
  
</mat-dialog-content>


<mat-dialog-actions align="end">
  <div class="flex gap-2 p-[20px]">
    <!--[loading]="loading"-->
    <app-button [loading]="loading" (click)="save()" full impact="bold" tone="primary" shape="rounded" size="medium">Guardar</app-button>
    <app-button [disabled]="loading"  mat-dialog-close full impact="bold" tone="primary" shape="rounded" size="medium">Cerrar</app-button>

  </div>
</mat-dialog-actions>